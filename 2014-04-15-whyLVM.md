Title: Why I use LVM
Date: 2014-04-15
Tags: howto, security, linux, bash, partitioning
Published: false

If you've never used LVM before and you're just trying to set up git, and maybe you're not that familiar with Linux, you can consider skipping LVM for now. But, I highly recommend you come back to it, soon!

LVM stands for *"Logical Volume Manager"*. Have you ever struggled to resize your stupid c: partition on Windows that has the e: partition right behind it? Switch to Linux and use LVM, it fixes that!


1. **It is stupid easy to add more disk space, grow or shrink partitions.** This avoids having to worry about keeping enough space around for a partition, or how to grow that pesky partition #3 that is sandwiched right into the middle of your disk. LVM just doesn't care, it manages the disks, and you tell it how much space you want for the partitions.

	+ When your home partition runs out of space but you still have disk space available, you simply need to grow the LVM partition. Assume you have 500Gb available and you want to grow the home partition in the volume group vg0, you simply issue the command:  
	# grow the partition  
	`lvextend vg0/home +200Gb`  
	Now this space is still dark; it doesn't have a file system yet, so two more steps:  
	# check for errors first (keeps resize happy)  
	`fsck /dev/vg0/home`  
	# then grow it, defaulting to fill the partition size:  
	`resize2fs /dev/vg0/home`
	
	+ When you run out of disk space, just add another disk and tell LVM about it! Assuming your new disk is listed at /dev/sdb,  
	# tell LVM to use this disk:  
	`pvcreate /dev/sdb`  
	# and then tell LVM to add it to volume group vg0:  
	`vgextend vg0 /dev/sdb`  
	
2. **Security!** When I first started exploring Linux, I ran across several recommendations of how to partition your drives and what permissions to grant / deny when mounting them. I remember a quote  

> Next time you see someone with only a / partition, you know what to do.  
  
I'm not going to go in depth here, but there are a number of attacks that you are vulnerable to if everything is under one partition. A tmp or /var/log flood can fill your drive and give the attacker access to the reserved space to run, allowing them super user privileges on that partition. Putting these onto their own partitions and preventing execution on those partitions hardens against this; if the attacker does flood and gain control of that file system, they cannot do any damage.


### ... and my boot partitions are 120mb to 200mb

You shouldn't need more than 200mb for your boot partition. When I first set up LVM on a server and was reading on the partitions, they recommended no more than 120mb. Bootloaders are tiny, and it doesn't hurt to clean that up every now and then.









[img1]: /home/damon/Dropbox/Photos/graphics/clipart/constructionDuck.jpg
[img2]: /home/damon/Dropbox/Photos/graphics/clipart/constructionDuck.jpg
[img3]: /home/damon/Dropbox/Photos/graphics/clipart/constructionDuck.jpg
[img4]: /home/damon/Dropbox/Photos/graphics/clipart/constructionDuck.jpg
[img5]: /home/damon/Dropbox/Photos/graphics/clipart/constructionDuck.jpg
[img6]: /home/damon/Dropbox/Photos/graphics/clipart/constructionDuck.jpg
[img7]: /home/damon/Dropbox/Photos/graphics/clipart/constructionDuck.jpg
[img8]: /home/damon/Dropbox/Photos/graphics/clipart/constructionDuck.jpg
[img9]: /home/damon/Dropbox/Photos/graphics/clipart/constructionDuck.jpg
[img10]: /home/damon/Dropbox/Photos/graphics/clipart/constructionDuck.jpg
[img11]: /home/damon/Dropbox/Photos/graphics/clipart/constructionDuck.jpg
[img12]: /home/damon/Dropbox/Photos/graphics/clipart/constructionDuck.jpg
[img13]: /home/damon/Dropbox/Photos/graphics/clipart/constructionDuck.jpg
[img14]: /home/damon/Dropbox/Photos/graphics/clipart/constructionDuck.jpg
[img15]: /home/damon/Dropbox/Photos/graphics/clipart/constructionDuck.jpg
[img16]: /home/damon/Dropbox/Photos/graphics/clipart/constructionDuck.jpg
[img17]: /home/damon/Dropbox/Photos/graphics/clipart/constructionDuck.jpg
[img18]: /home/damon/Dropbox/Photos/graphics/clipart/constructionDuck.jpg
[img19]: /home/damon/Dropbox/Photos/graphics/clipart/constructionDuck.jpg
[img20]: /home/damon/Dropbox/Photos/graphics/clipart/constructionDuck.jpg

